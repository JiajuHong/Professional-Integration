# 7.1区块链概述

## 1、区块链基本概念

### 区块链

工信部对区块链的定义是：<u>分布式数据存储、点对点传输、共识机制、加密算法等计算机技术的新型应用模式。</u>

区块链技术是分布式的网络数据管理技术，利用密码学技术和分布式共识协议保证网络传输与访问安全，实现数据多方维护、交叉验证、全网一致、不易篡改。

区块链就是一个不断增长的全网总账本，每个完全节点都拥有完整的区块链，并且，节点总是信任最长的区块链，伪造区块链需要拥有超过51%的全网算力。区块链的一个重要特性就是不可篡改。

从狭义上说，区块链是一种按照时间顺序将数据区块依次链接形成的链式数据结构，并以密码学方法保证数据块的不可篡改不可伪造。

从广义上说，区块链是利用块链式数据结构来验证与存储数据，利用分布式节点共识算法来生成和更新数据，利用密码学方式保证数据传输和访问安全，利用自由化脚本代码组成的智能合约来编程和操作数据的一种全新的分布式基础架构与计算范式。

> 区块链技术作为智能社会的关键支撑技术之一，其核心价值是实现社会关系运行的智能化，具有巨大的产业发展机遇。



### 比特币

区块链（Blockchain）技术源于比特币。在比特币中，为了保证每笔交易可信并不可篡改，中本聪发明了区块链，它通过后一个区块对前一个区块的引用，并以加密技术保证了区块链不可修改。

比特币是人类历史上第一种数字货币。

什么是数字货币？一句话概括，数字货币是基于数学加密原理构建的不可伪造的货币系统，而比特币是第一个基于数学加密原理构建的分布式数字货币系统。

比特币和区块链有什么关系？一句话概括，比特币使用区块链技术实现了数字货币的可信支付。

比特币的历史可以追溯到2008年10月，一个名叫中本聪的神秘人物在一个密码学朋克论坛上发表了一篇[比特币：一种点对点的电子现金系统](https://bitcoin.org/bitcoin.pdf)的文章，这篇文章被看成是比特币的白皮书。

随后在08年11月，中本聪发布了比特币的第一版代码。09年1月，中本聪挖出了比特币的第一个区块——创世区块，比特币网络正式开始运行。

比特币则是通过区块链技术，把整个账本全部公开，人手一份，全网相同，因此，修改账本不会被其他人承认。比特币的区块链就是一种存储了全部账本的链式数据库，通过一系列密码学理论进行防篡改，防双花。

<u>白皮书规定，节点永远认为最长链式正确的区块链，并将持续在它上面延长。所有矿工都在最长链上挖矿。</u>

### 区块链技术的特点

1. 去中心化（分布式）：最基本特征。
2. 开放性（高度透明）：除交易方私有信息被加密，交易信息对所有人是公开的。
3. 匿名性：交易方通过地址而不是身份进行。
4. 自动化（自治性）：区块链基于协商一致的规范和协议。关键：智能合约技术
5. 独立性（集体维护）：伪造区块链需要拥有超过51%的全网算力，避免了主观人为的数据变更。
6. 安全性：共识机制（一致性）和密码学算法（安全性保障）保证区块链的数据安全、不可篡改、高度透明。
7. 信息不可篡改：时间戳证明、首尾相连记账规则、哈希加密算法、共识机制等技术。
8. 可追溯性：区块链是由一个一个区块构成的有序链表，每一个区块都记录了一系列交易，并且，每个区块都指向前一个区块，从而形成一个链条

### 区块链技术的价值

1. 安全
2. 确权
3. 信任
4. 自动化
5. 价值共享

### 区块链分类

按开放程度分

1. 公有链：系统全开放（BTC，ETH）
2. 联盟链：系统半开放（R3联盟），记账需要许可
3. 私有链：系统封闭（中心化系统）

按应用范围分

1. 基础链：一般以公有链为主
2. 行业链：为行业提供相关基础工具和协议

### 挖矿

在比特币的P2P网络中，有一类节点，它们时刻不停地进行计算，试图把新的交易打包成新的区块并附加到区块链上，这类节点就是矿工。因为每打包一个新的区块，打包该区块的矿工就可以获得一笔比特币作为奖励。所以，打包新区块就被称为挖矿。

比特币的挖矿原理就是一种工作量证明机制。工作量证明POW是英文Proof of Work的缩写。

矿工的角色是建立构成比特币分类账的记录区块链。这些分类帐称为块，每个块包含已发生的所有不同事务。当新的比特币交易发生时，每10分钟添加一个新块。因此，当矿工处理这些不同的交易时，他们会构建块，当块确认后，它会被添加到区块链中。这个区块链一直建立在比特币的初始交易中，比特币被视为发生块。比特币区块链提供了所有比特币交易的永久记录。

### 挖矿分叉

#### 共识算法

如果两个矿工在同一时间各自找到了有效区块，注意，这两个区块是不同的，因为coinbase交易不同，所以Merkle Hash不同，区块哈希也不同。但它们只要符合难度值，就都是有效的。这个时候，网络上的其他矿工应该接收哪个区块并添加到区块链的末尾呢？答案是，都有可能。

通常，矿工接收先收到的有效区块，由于P2P网络广播的顺序是不确定的，不同的矿工先收到的区块是有可能的不同的。这个时候，我们说区块发生了分叉：

![image-20221108153035782](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/13837/image-20221108153035782.png)

在分叉的情况下，有的矿工在绿色的分叉上继续挖矿，有的矿工在蓝色的分叉上继续挖矿：

![image-20221108160214262](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/13837/image-20221108160214262.png)

但是最终，总有一个分叉首先挖到后续区块，这个时候，由于比特币网络采用最长分叉的共识算法，绿色分叉胜出，蓝色分叉被废弃，整个网络上的所有矿工又会继续在最长的链上继续挖矿。

由于区块链虽然最终会保持数据一致，但是，一个交易可能被打包到一个后续被孤立的区块中。所以，要确认一个交易被永久记录到区块链中，需要对交易进行确认。如果后续的区块被追加到区块链上，实际上就会对原有的交易进行确认，因为链越长，修改的难度越大。一般来说，经过6个区块确认的交易几乎是不可能被修改的。

![image-20221108160232079](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/13837/image-20221108160232079.png)

### 升级分叉

- 硬分叉：指在区块链或去中心化网络中不向前兼容的分叉，硬分叉对加密货币使用的技术进行永 久更改，这种变化使得所有的新数据块与原来的块不同，旧版本不会接受新版本创建的 区块，要实现硬分叉所有用户都需要切换到新版本协议上。如果新的硬分叉失败，所有 的用户将回到原始数据块
- 软分叉：指在区块链或去中心化网络中向前兼容的分叉。向前兼容意味着，当新共识规则发布后，在去中心化架构中节点不一定要升级到新的共识规则，因为软分叉的新规则仍旧符合老的规则，所以未升级的节点仍旧能接受新的规则。

## 2、区块链的发展历程

1. 萌芽阶段（2007~2009）
2. 奇客小众阶段（2010~2012）：比特币交易所出现，互联网人狂热参与比特币
3. 市场酝酿阶段（2013~2015）：德国确认比特币的地位、百度开通比特币支付通道
4. 区块链主流期（2016~2018）：比特币市场需求量变大
5. 产业落地阶段（2019~2021）：虚拟币和区块链回归理性，加快区块链与市场融合应用

